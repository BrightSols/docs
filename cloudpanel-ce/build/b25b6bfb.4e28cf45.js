(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{147:function(e,a,t){"use strict";t.r(a),t.d(a,"frontMatter",(function(){return s})),t.d(a,"metadata",(function(){return c})),t.d(a,"rightToc",(function(){return o})),t.d(a,"default",(function(){return p}));var n=t(1),r=(t(0),t(173)),b=t(174);const s={id:"cloudpanel-cli-commands",title:"CloudPanel CLI Commands",sidebar_label:"Commands"},c={id:"cloudpanel-cli-commands",title:"CloudPanel CLI Commands",description:"The CloudPanel CLI is a command-line application that offers commands for backing up databases, restoring databases,",source:"@site/docs/cloudpanel-cli-commands.md",permalink:"/docs/cloudpanel-ce/cloudpanel-cli-commands",editUrl:"https://github.com/cloudpanel-io/docs/tree/master/cloudpanel-ce/docs/cloudpanel-cli-commands.md",sidebar_label:"Commands",sidebar:"sidebar",previous:{title:"Settings",permalink:"/docs/cloudpanel-ce/admin-settings"},next:{title:"CakePHP 4",permalink:"/docs/cloudpanel-ce/application-cakephp-4"}},o=[{value:"Database",id:"database",children:[{value:"Database Backup",id:"database-backup",children:[]},{value:"Database Import",id:"database-import",children:[]},{value:"Database Credentials",id:"database-credentials",children:[]},{value:"Database Master Password",id:"database-master-password",children:[]}]},{value:"User",id:"user",children:[{value:"Disable 2-FA",id:"disable-2-fa",children:[]},{value:"Reset Password",id:"reset-password",children:[]}]},{value:"System",id:"system",children:[{value:"Permission Reset",id:"permission-reset",children:[]}]}],l={rightToc:o};function p({components:e,...a}){return Object(r.b)("wrapper",Object(n.a)({},l,a,{components:e,mdxType:"MDXLayout"}),Object(r.b)("p",null,"The ",Object(r.b)("strong",{parentName:"p"},"CloudPanel CLI")," is a command-line application that offers commands for backing up databases, restoring databases,\nshowing database credentials,  disabling two-factor authentification, resetting passwords, and resetting permissions."),Object(r.b)("img",{class:"border",src:Object(b.a)("img/v1/cli/cli_commands.png")})," ",Object(r.b)("br",null),Object(r.b)("br",null),Object(r.b)("p",null,"With the following ",Object(r.b)("strong",{parentName:"p"},"command")," you see all available ",Object(r.b)("strong",{parentName:"p"},"commands"),":"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"clpctl\n")),Object(r.b)("div",{className:"admonition admonition-caution alert alert--warning"},Object(r.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(r.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}),Object(r.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"})))),"Commands")),Object(r.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(r.b)("p",{parentName:"div"},"The following ",Object(r.b)("strong",{parentName:"p"},"commands")," are available only for the ",Object(r.b)("strong",{parentName:"p"},"root")," user:"),Object(r.b)("ul",{parentName:"div"},Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"db:show:credentials")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"db:show:master-password")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"user:disable:mfa")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"user:reset:password")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"vhost-templates:import"))),Object(r.b)("p",{parentName:"div"},"The following ",Object(r.b)("strong",{parentName:"p"},"commands")," are available for other ",Object(r.b)("strong",{parentName:"p"},"users"),":"),Object(r.b)("ul",{parentName:"div"},Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"db:backup")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"db:import")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"system:permissions:reset"))))),Object(r.b)("h2",{id:"database"},"Database"),Object(r.b)("h3",{id:"database-backup"},"Database Backup"),Object(r.b)("p",null,"With the ",Object(r.b)("strong",{parentName:"p"},"Database Backup")," command you can backup all databases or specific ones."),Object(r.b)("p",null,"For backing up databases, ",Object(r.b)("strong",{parentName:"p"},"CloudPanel")," uses the standard utility ",Object(r.b)("strong",{parentName:"p"},"mysqldump"),"."),Object(r.b)("p",null,"To ",Object(r.b)("strong",{parentName:"p"},"backup all")," databases, run the following command:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"clpctl db:backup --databases=all\n")),Object(r.b)("p",null,"If you want to ",Object(r.b)("strong",{parentName:"p"},"exclude")," some ",Object(r.b)("strong",{parentName:"p"},"databases"),", run the following command:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"clpctl db:backup --databases=all --ignoreDatabases=db1,db2\n")),Object(r.b)("p",null,"To ",Object(r.b)("strong",{parentName:"p"},"backup")," only one specific ",Object(r.b)("strong",{parentName:"p"},"database"),", run the following command:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"clpctl db:backup --databases=$databaseName\n")),Object(r.b)("p",null,"The ",Object(r.b)("strong",{parentName:"p"},"Database Backups")," will be compressed via ",Object(r.b)("strong",{parentName:"p"},"gzip")," and stored in the following directory:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"/home/cloudpanel/backups/\n")),Object(r.b)("h3",{id:"database-import"},"Database Import"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Importing")," or ",Object(r.b)("strong",{parentName:"p"},"restoring")," a database can be done with the following command:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"clpctl db:import --file=dump.sql.gz --database=database-name\n")),Object(r.b)("p",null,"The supported file formats are ",Object(r.b)("strong",{parentName:"p"},".sql")," and ",Object(r.b)("strong",{parentName:"p"},"sql.gz"),". "),Object(r.b)("h3",{id:"database-credentials"},"Database Credentials"),Object(r.b)("p",null,"The ",Object(r.b)("strong",{parentName:"p"},"Database Credentials")," command shows the master credentials for connecting to the ",Object(r.b)("strong",{parentName:"p"},"database"),"."),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"clpctl db:show:credentials\n")),Object(r.b)("p",null,"The output will look like:"),Object(r.b)("img",{class:"border",src:Object(b.a)("img/v1/cli/db_show_credentials.png")})," ",Object(r.b)("br",null),Object(r.b)("br",null),Object(r.b)("p",null,"Use the ",Object(r.b)("strong",{parentName:"p"},"Connect Command")," to connect to ",Object(r.b)("strong",{parentName:"p"},"MySQL")," from the command-line."),Object(r.b)("p",null,"This command is only available for the ",Object(r.b)("strong",{parentName:"p"},"root")," user."),Object(r.b)("h3",{id:"database-master-password"},"Database Master Password"),Object(r.b)("p",null,"To display only the ",Object(r.b)("strong",{parentName:"p"},"Database Maste Password")," run the following command:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"clpctl db:show:master-password\n")),Object(r.b)("p",null,"This command is only available for the ",Object(r.b)("strong",{parentName:"p"},"root")," user."),Object(r.b)("h2",{id:"user"},"User"),Object(r.b)("h3",{id:"disable-2-fa"},"Disable 2-FA"),Object(r.b)("p",null,"To disable ",Object(r.b)("strong",{parentName:"p"},"Two-Factor Authentication")," for a ",Object(r.b)("strong",{parentName:"p"},"user"),", run the following command:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"clpctl user:disable:mfa 'john.doe'\n")),Object(r.b)("p",null,"This command is only available for the ",Object(r.b)("strong",{parentName:"p"},"root")," user."),Object(r.b)("h3",{id:"reset-password"},"Reset Password"),Object(r.b)("p",null,"To ",Object(r.b)("strong",{parentName:"p"},"reset a password")," for a ",Object(r.b)("strong",{parentName:"p"},"user"),", run the following command:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"clpctl user:reset:password 'john.doe' 'newPassword123'\n")),Object(r.b)("p",null,"This command is only available for the ",Object(r.b)("strong",{parentName:"p"},"root")," user."),Object(r.b)("h2",{id:"system"},"System"),Object(r.b)("h3",{id:"permission-reset"},"Permission Reset"),Object(r.b)("p",null,"To reset the ",Object(r.b)("strong",{parentName:"p"},"owner")," and ",Object(r.b)("strong",{parentName:"p"},"permissions")," of files and directories run the following command:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"clpctl system:permissions:reset $directoryOrFile 775\n")),Object(r.b)("p",null,"The reset of the ",Object(r.b)("strong",{parentName:"p"},"owner")," and ",Object(r.b)("strong",{parentName:"p"},"permissions")," are applied recursively."))}p.isMDXComponent=!0},172:function(e,a,t){"use strict";var n=t(0),r=t(35);a.a=function(){return Object(n.useContext)(r.a)}},173:function(e,a,t){"use strict";t.d(a,"a",(function(){return i})),t.d(a,"b",(function(){return u}));var n=t(0),r=t.n(n);function b(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function s(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function c(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?s(Object(t),!0).forEach((function(a){b(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function o(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},b=Object.keys(e);for(n=0;n<b.length;n++)t=b[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(e);for(n=0;n<b.length;n++)t=b[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var l=r.a.createContext({}),p=function(e){var a=r.a.useContext(l),t=a;return e&&(t="function"==typeof e?e(a):c({},a,{},e)),t},i=function(e){var a=p(e.components);return r.a.createElement(l.Provider,{value:a},e.children)},d={inlineCode:"code",wrapper:function(e){var a=e.children;return r.a.createElement(r.a.Fragment,{},a)}},m=Object(n.forwardRef)((function(e,a){var t=e.components,n=e.mdxType,b=e.originalType,s=e.parentName,l=o(e,["components","mdxType","originalType","parentName"]),i=p(t),m=n,u=i["".concat(s,".").concat(m)]||i[m]||d[m]||b;return t?r.a.createElement(u,c({ref:a},l,{components:t})):r.a.createElement(u,c({ref:a},l))}));function u(e,a){var t=arguments,n=a&&a.mdxType;if("string"==typeof e||n){var b=t.length,s=new Array(b);s[0]=m;var c={};for(var o in a)hasOwnProperty.call(a,o)&&(c[o]=a[o]);c.originalType=e,c.mdxType="string"==typeof e?e:n,s[1]=c;for(var l=2;l<b;l++)s[l]=t[l];return r.a.createElement.apply(null,s)}return r.a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},174:function(e,a,t){"use strict";t.d(a,"a",(function(){return r}));var n=t(172);function r(e){const{siteConfig:a}=Object(n.a)(),{baseUrl:t="/"}=a||{};if(!e)return e;return/^(https?:|\/\/)/.test(e)?e:e.startsWith("/")?t+e.slice(1):t+e}}}]);